<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title>Display a map</title>
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css' rel='stylesheet' />
        <link rel="stylesheet" href="css/style.css"/>
        <style>
            #map { relative; top:0; bottom:0; width:100%; }
            .holder {
                max-width: 320px;
                min-width: 320px;
            }
        </style>
    </head>
    <body>
        <div class="container-fluid h-25">
                <div class="row h-100">
                    <div class="col-md-12 bg-danger">
                </div>
            </div>
        </div>
        <div class="container-fluid h-75">
            <div class="row h-100">
                <div class="col-md-10" id="map"></div>
                <div class="col-md-2 bg-dark"></div>
            </div>
        </div>
        <script>
            mapboxgl.accessToken = 'pk.eyJ1IjoibWl0Y2hhaW5zbGllaXQiLCJhIjoiY2pmYzBjMzd6MG13YjMxcGF3ZzhzbDlkNiJ9.L31BT52cSRJKJsUoIQrNKg';
var geojson = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "message": "Baz",
                "description": "<strong>POLICE PRECINT No.8</strong><p class='holder'>POLICE STATION EXAMPLE   </p>",
                "iconSize": [40, 40],
                "icon" : "Police"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [120.599572, 16.391066]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "message": "Baz",
                "description": "<strong>POLICE PRECINT No.8</strong><p class='holder'>FIRESTATION EXAMPLE</p>",
                "iconSize": [40, 40],
                "icon" : "FireStation"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [120.578325, 16.411615]
            }
        }
    ]
};

var map = new mapboxgl.Map({
    container: 'map', // container id
                style: 'mapbox://styles/mapbox/streets-v9',
                center: [120.596007, 16.402333], // starting position
                zoom: 12, // starting zoom
                interactive: false
});

// add markers to map
            geojson.features.forEach(function(marker) {
    // create a DOM element for the marker
    var el = document.createElement('div');
    var popup = new mapboxgl.Popup()
    .setHTML(marker.properties.description);
    el.className = 'marker';
    if(marker.properties.icon == 'Police') {
        el.style.backgroundImage = 'url(https://i.imgur.com/MK4NUzI.png)';
        el.style.width = marker.properties.iconSize[0] + 'px';
        el.style.height = marker.properties.iconSize[1] + 'px';
        el.style.backgroundRepeat='no-repeat';
        el.style.backgroundPosition='center';
        el.style.cursor='pointer';
    } else if(marker.properties.icon == 'FireStation') {
        el.style.backgroundImage = 'url(https://services.garmin.com/appsLibraryBusinessServices_v0/rest/apps/1e59f353-bbeb-4989-b740-57a7fc2e4785/icon/1392e995-e206-4e9c-ba87-a2f5c27213ad)';
        el.style.backgroundSize = '30px 40px';
        el.style.width = marker.properties.iconSize[0] + 'px';
        el.style.height = marker.properties.iconSize[1] + 'px';
        el.style.backgroundRepeat='no-repeat';
        el.style.backgroundPosition='center';
        el.style.cursor='pointer';
    }

    // add marker to map
    new mapboxgl.Marker(el)
        .setPopup(popup)
        .setLngLat(marker.geometry.coordinates)
        .addTo(map);
    });
        </script>
        <script type="text/javascript">
            if (navigator.serviceWorker.controller) {
                console.log('[PWA Builder] active service worker found, no need to register')
            } else {
                navigator.serviceWorker.register('pwabuilder-sw.js', {
                    scope: './'
                }).then(function(reg) {
                    console.log('Service worker has been registered for scope:'+ reg.scope);
                });
            }
        </script>
    </body>
</html>